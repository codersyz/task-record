{"version":3,"file":"user.js","sources":["pages/user/user.vue","pages/user/user.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <!-- Áî®Êà∑‰ø°ÊÅØ -->\n        <view class=\"user-card\">\n            <image class=\"avatar\" :src=\"userInfo.avatar_url || '/static/logo.webp'\" mode=\"aspectFill\"></image>\n            <text class=\"nickname\">{{ userInfo.nickname || 'Êú™ËÆæÁΩÆÊòµÁß∞' }}</text>\n\n            <!-- ÁßØÂàÜ‰ø°ÊÅØ -->\n            <view class=\"points-badge\">\n                <text class=\"points-icon\">üíé</text>\n                <text class=\"points-text\">{{ pointsInfo.points || 0 }} ÁßØÂàÜ</text>\n            </view>\n            <view class=\"streak-info\">\n                <text class=\"streak-text\">üî• ËøûÁª≠ÊâìÂç° {{ pointsInfo.consecutiveDays || 0 }} Â§©</text>\n            </view>\n        </view>\n\n        <!-- ÁªüËÆ°‰ø°ÊÅØ -->\n        <view class=\"stats-card\">\n            <view class=\"stat-item\">\n                <text class=\"stat-num\">{{ stats.totalTasks }}</text>\n                <text class=\"stat-label\">ÊÄª‰ªªÂä°Êï∞</text>\n            </view>\n            <view class=\"stat-item\">\n                <text class=\"stat-num\">{{ stats.totalCheckins }}</text>\n                <text class=\"stat-label\">ÊÄªÊâìÂç°Êï∞</text>\n            </view>\n            <view class=\"stat-item\">\n                <text class=\"stat-num\">{{ stats.maxStreak }}</text>\n                <text class=\"stat-label\">ÊúÄÈïøËøûÁª≠</text>\n            </view>\n        </view>\n\n        <!-- ÂäüËÉΩÂàóË°® -->\n        <view class=\"menu-list\">\n            <view class=\"menu-item\" @click=\"goToShop\">\n                <text class=\"menu-icon\">üõí</text>\n                <text class=\"menu-text\">ÁßØÂàÜÂïÜÂüé</text>\n                <view class=\"menu-badge\">Âç≥Â∞Ü‰∏äÁ∫ø</view>\n                <text class=\"menu-arrow\">‚Ä∫</text>\n            </view>\n            <view class=\"menu-item\" @click=\"goToPointRecords\">\n                <text class=\"menu-icon\">üíé</text>\n                <text class=\"menu-text\">ÁßØÂàÜÊòéÁªÜ</text>\n                <text class=\"menu-arrow\">‚Ä∫</text>\n            </view>\n            <view class=\"menu-item\" @click=\"goToRanking\">\n                <text class=\"menu-icon\">üìä</text>\n                <text class=\"menu-text\">ÁßØÂàÜÊéíË°åÊ¶ú</text>\n                <text class=\"menu-arrow\">‚Ä∫</text>\n            </view>\n            <view class=\"menu-item\" @click=\"goToCalendar\">\n                <text class=\"menu-icon\">üìÖ</text>\n                <text class=\"menu-text\">ÊâìÂç°Êó•ÂéÜ</text>\n                <text class=\"menu-arrow\">‚Ä∫</text>\n            </view>\n            <view class=\"menu-item\" @click=\"goToAchievement\">\n                <text class=\"menu-icon\">üèÜ</text>\n                <text class=\"menu-text\">ÊàëÁöÑÊàêÂ∞±</text>\n                <text class=\"menu-arrow\">‚Ä∫</text>\n            </view>\n            <view class=\"menu-item\" @click=\"editProfile\">\n                <text class=\"menu-icon\">‚úèÔ∏è</text>\n                <text class=\"menu-text\">ÁºñËæëËµÑÊñô</text>\n                <text class=\"menu-arrow\">‚Ä∫</text>\n            </view>\n            <view class=\"menu-item\" @click=\"handleLogout\">\n                <text class=\"menu-icon\">üö™</text>\n                <text class=\"menu-text\">ÈÄÄÂá∫ÁôªÂΩï</text>\n                <text class=\"menu-arrow\">‚Ä∫</text>\n            </view>\n        </view>\n\n        <!-- Ëá™ÂÆö‰πâ TabBar -->\n        <custom-tabbar />\n    </view>\n</template>\n\n<script>\nimport customTabbar from '@/components/custom-tabbar/custom-tabbar.vue';\nimport { getUserInfo } from '@/api/auth';\nimport { getTaskList } from '@/api/task';\nimport { getUserPoints } from '@/api/point';\n\nexport default {\n    components: {\n        customTabbar\n    },\n    data() {\n        return {\n            userInfo: {},\n            pointsInfo: {\n                points: 0,\n                consecutiveDays: 0\n            },\n            stats: {\n                totalTasks: 0,\n                totalCheckins: 0,\n                maxStreak: 0\n            }\n        };\n    },\n    onShow() {\n        this.loadUserInfo();\n        this.loadStats();\n        this.loadPoints();\n    },\n    methods: {\n        async loadUserInfo() {\n            try {\n                const res = await getUserInfo();\n                if (res.code === 200) {\n                    this.userInfo = res.data;\n                }\n            } catch (error) {\n                console.error('Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•:', error);\n            }\n        },\n\n        async loadStats() {\n            try {\n                const res = await getTaskList();\n                if (res.code === 200) {\n                    const tasks = res.data;\n                    this.stats.totalTasks = tasks.length;\n                    this.stats.totalCheckins = tasks.reduce((sum, t) => sum + t.total_days, 0);\n                    this.stats.maxStreak = Math.max(...tasks.map(t => t.current_days), 0);\n                }\n            } catch (error) {\n                console.error('Âä†ËΩΩÁªüËÆ°‰ø°ÊÅØÂ§±Ë¥•:', error);\n            }\n        },\n\n        async loadPoints() {\n            try {\n                const res = await getUserPoints();\n                if (res.code === 200) {\n                    this.pointsInfo = res.data;\n                }\n            } catch (error) {\n                console.error('Âä†ËΩΩÁßØÂàÜ‰ø°ÊÅØÂ§±Ë¥•:', error);\n            }\n        },\n\n        // ÁºñËæë‰∏™‰∫∫‰ø°ÊÅØ\n        editProfile() {\n            uni.navigateTo({\n                url: '/pages/profile-edit'\n            });\n        },\n\n        // Ë∑≥ËΩ¨Âà∞ÊâìÂç°Êó•ÂéÜ\n        goToCalendar() {\n            uni.navigateTo({\n                url: '/pages/calendar/calendar'\n            });\n        },\n\n        // Ë∑≥ËΩ¨Âà∞ÊàêÂ∞±‰∏≠ÂøÉ\n        goToAchievement() {\n            uni.navigateTo({\n                url: '/pages/achievement/achievement'\n            });\n        },\n\n        // Ë∑≥ËΩ¨Âà∞ÁßØÂàÜÂïÜÂüé\n        goToShop() {\n            uni.navigateTo({\n                url: '/pages/points/shop'\n            });\n        },\n\n        // Ë∑≥ËΩ¨Âà∞ÁßØÂàÜÊòéÁªÜ\n        goToPointRecords() {\n            uni.navigateTo({\n                url: '/pages/points/records'\n            });\n        },\n\n        // Ë∑≥ËΩ¨Âà∞ÁßØÂàÜÊéíË°åÊ¶ú\n        goToRanking() {\n            uni.navigateTo({\n                url: '/pages/points/ranking'\n            });\n        },\n\n        handleLogout() {\n            uni.showModal({\n                title: 'ÊèêÁ§∫',\n                content: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü',\n                success: (res) => {\n                    if (res.confirm) {\n                        uni.removeStorageSync('token');\n                        uni.removeStorageSync('userId');\n                        uni.reLaunch({\n                            url: '/pages/login/login'\n                        });\n                    }\n                }\n            });\n        }\n    }\n};\n</script>\n\n<style scoped>\n.container {\n    min-height: 100vh;\n    background: #F5F5F5;\n    padding-bottom: 160rpx;\n}\n\n.user-card {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    padding: 60rpx 40rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.avatar {\n    width: 120rpx;\n    height: 120rpx;\n    border-radius: 60rpx;\n    border: 4rpx solid #FFFFFF;\n    margin-bottom: 20rpx;\n}\n\n.nickname {\n    font-size: 32rpx;\n    font-weight: bold;\n    color: #FFFFFF;\n}\n\n.points-badge {\n    margin-top: 20rpx;\n    background: rgba(255, 255, 255, 0.2);\n    padding: 10rpx 30rpx;\n    border-radius: 30rpx;\n    display: flex;\n    align-items: center;\n    gap: 10rpx;\n}\n\n.points-icon {\n    font-size: 28rpx;\n}\n\n.points-text {\n    font-size: 28rpx;\n    color: #FFFFFF;\n    font-weight: bold;\n}\n\n.streak-info {\n    margin-top: 15rpx;\n}\n\n.streak-text {\n    font-size: 24rpx;\n    color: rgba(255, 255, 255, 0.9);\n}\n\n.stats-card {\n    background: #FFFFFF;\n    margin: 20rpx;\n    border-radius: 16rpx;\n    padding: 40rpx;\n    display: flex;\n    justify-content: space-around;\n}\n\n.stat-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.stat-num {\n    font-size: 40rpx;\n    font-weight: bold;\n    color: #333333;\n}\n\n.stat-label {\n    font-size: 24rpx;\n    color: #999999;\n    margin-top: 10rpx;\n}\n\n.menu-list {\n    margin: 20rpx;\n}\n\n.menu-item {\n    background: #FFFFFF;\n    padding: 30rpx;\n    border-radius: 16rpx;\n    margin-bottom: 15rpx;\n    display: flex;\n    align-items: center;\n    position: relative;\n}\n\n.menu-icon {\n    font-size: 36rpx;\n    margin-right: 20rpx;\n}\n\n.menu-text {\n    font-size: 28rpx;\n    color: #333333;\n    flex: 1;\n}\n\n.menu-badge {\n    padding: 4rpx 12rpx;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: #FFFFFF;\n    font-size: 20rpx;\n    border-radius: 10rpx;\n    margin-right: 10rpx;\n}\n\n.menu-arrow {\n    font-size: 40rpx;\n    color: #CCCCCC;\n    font-weight: bold;\n}\n</style>\n","import MiniProgramPage from '/Users/sunyizhong/uni-app/HBuilderProjects/taskuniapp/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["getUserInfo","uni","getTaskList","getUserPoints"],"mappings":";;;;;AA+EA,MAAO,eAAc,MAAW;AAKhC,MAAK,YAAU;AAAA,EACX,YAAY;AAAA,IACR;AAAA,EACH;AAAA,EACD,OAAO;AACH,WAAO;AAAA,MACH,UAAU,CAAE;AAAA,MACZ,YAAY;AAAA,QACR,QAAQ;AAAA,QACR,iBAAiB;AAAA,MACpB;AAAA,MACD,OAAO;AAAA,QACH,YAAY;AAAA,QACZ,eAAe;AAAA,QACf,WAAW;AAAA,MACf;AAAA;EAEP;AAAA,EACD,SAAS;AACL,SAAK,aAAY;AACjB,SAAK,UAAS;AACd,SAAK,WAAU;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACL,MAAM,eAAe;AACjB,UAAI;AACA,cAAM,MAAM,MAAMA,SAAAA;AAClB,YAAI,IAAI,SAAS,KAAK;AAClB,eAAK,WAAW,IAAI;AAAA,QACxB;AAAA,MACF,SAAO,OAAO;AACZC,sBAAc,MAAA,MAAA,SAAA,8BAAA,aAAa,KAAK;AAAA,MACpC;AAAA,IACH;AAAA,IAED,MAAM,YAAY;AACd,UAAI;AACA,cAAM,MAAM,MAAMC,SAAAA;AAClB,YAAI,IAAI,SAAS,KAAK;AAClB,gBAAM,QAAQ,IAAI;AAClB,eAAK,MAAM,aAAa,MAAM;AAC9B,eAAK,MAAM,gBAAgB,MAAM,OAAO,CAAC,KAAK,MAAM,MAAM,EAAE,YAAY,CAAC;AACzE,eAAK,MAAM,YAAY,KAAK,IAAI,GAAG,MAAM,IAAI,OAAK,EAAE,YAAY,GAAG,CAAC;AAAA,QACxE;AAAA,MACF,SAAO,OAAO;AACZD,sBAAc,MAAA,MAAA,SAAA,8BAAA,aAAa,KAAK;AAAA,MACpC;AAAA,IACH;AAAA,IAED,MAAM,aAAa;AACf,UAAI;AACA,cAAM,MAAM,MAAME,UAAAA;AAClB,YAAI,IAAI,SAAS,KAAK;AAClB,eAAK,aAAa,IAAI;AAAA,QAC1B;AAAA,MACF,SAAO,OAAO;AACZF,sBAAc,MAAA,MAAA,SAAA,8BAAA,aAAa,KAAK;AAAA,MACpC;AAAA,IACH;AAAA;AAAA,IAGD,cAAc;AACVA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACT,CAAC;AAAA,IACJ;AAAA;AAAA,IAGD,eAAe;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACT,CAAC;AAAA,IACJ;AAAA;AAAA,IAGD,kBAAkB;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACT,CAAC;AAAA,IACJ;AAAA;AAAA,IAGD,WAAW;AACPA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACT,CAAC;AAAA,IACJ;AAAA;AAAA,IAGD,mBAAmB;AACfA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACT,CAAC;AAAA,IACJ;AAAA;AAAA,IAGD,cAAc;AACVA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACT,CAAC;AAAA,IACJ;AAAA,IAED,eAAe;AACXA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACd,cAAI,IAAI,SAAS;AACbA,gCAAI,kBAAkB,OAAO;AAC7BA,gCAAI,kBAAkB,QAAQ;AAC9BA,0BAAAA,MAAI,SAAS;AAAA,cACT,KAAK;AAAA,YACT,CAAC;AAAA,UACL;AAAA,QACJ;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,EACJ;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzMA,GAAG,WAAW,eAAe;"}